При загрузке веб-страницы браузер получает по сети поток байтов, который затем преобразуется в удобную для работы структуру – DOM (Document Object Model). Этот процесс включает несколько этапов:

## 1. Получение данных по сети

- **Запрос и ответ:**  
    Браузер инициирует HTTP-запрос к серверу. В ответ сервер отправляет документ (например, HTML) в виде потока байтов.
    
- **Передача данных:**  
    Байты могут приходить частями (потоковая передача), что позволяет браузеру начинать обработку ещё до получения всего документа.

## 2. Декодирование байтов в текст

- **Определение кодировки:**  
    Браузер определяет, в какой кодировке закодирован текст. Обычно информация о кодировке передаётся в HTTP-заголовке `Content-Type` (например, `Content-Type: text/html; charset=UTF-8`) или указывается в самом HTML через мета-тег `<meta charset="UTF-8">`.
    
- **Декодирование:**  
    Полученные байты декодируются в символы с использованием определённой кодировки. На выходе получается строка с текстовым представлением HTML-документа.

## 3. Парсинг HTML и построение DOM

- **Лексический анализ:**  
    Специальный компонент браузера – HTML-парсер – начинает работать с полученной строкой. Сначала происходит лексический анализ, где текст разбивается на токены (например, начало и конец тегов, текстовые данные, комментарии).
    
- **Синтаксический анализ (парсинг):**  
    На основе токенов парсер строит дерево элементов, следуя алгоритму, описанному в спецификации HTML. При этом учитываются правила вложенности, корректировки при обнаружении ошибок (HTML-парсеры устойчивы к синтаксическим ошибкам в документе) и особенности работы с динамическим контентом.
    
- **Построение DOM-дерева:**  
    Каждый тег, текст или комментарий преобразуются в соответствующий узел (node) дерева. Так формируется иерархическая структура DOM, в которой каждый узел связан с родительским, дочерними и соседними элементами.
    
- **Инкрементальность:**  
    Парсер может работать инкрементально, то есть строить DOM по мере поступления данных, не дожидаясь завершения загрузки всего документа. Это позволяет браузеру отображать содержимое быстрее и начать обработку скриптов и стилей раньше.

## 4. Применение DOM

- **Доступ к элементам:**  
    После построения DOM он становится доступен для дальнейшей обработки: JavaScript-движок может изменять его структуру, применять стили, обрабатывать события, а браузер – проводить расчёт верстки и отрисовку.
    
- **Динамическое обновление:**  
    DOM позволяет в режиме реального времени изменять содержимое страницы, не требуя её перезагрузки.

## Итоговый процесс

1. **Получение байтов:** Документ приходит по сети в виде последовательности байтов.
2. **Декодирование:** Байты преобразуются в текст на основе заданной кодировки.
3. **Парсинг:** HTML-парсер анализирует текст, разбивает его на токены и последовательно строит DOM-дерево.
4. **Использование:** Полученное DOM-дерево используется для отображения страницы, а также для взаимодействия с пользователем через скрипты и стили.